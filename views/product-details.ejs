    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <title><%= product.name %> - Product Details</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #f3f4f6;
                margin: 0;
                padding: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding-top: 80px;
            }
            .sticky-header {
                position: sticky;
                top: 0;
                z-index: 1000;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .avatar {
                width: 30px;
                height: 30px;
                border-radius: 50%;
                object-fit: cover;
            }

            .container-anh {
                width: 50%;
                background: #fff;
                padding: 0.2px;
                display: flex;
                gap: 20px;
            }
            .dark-mode .container-anh{
                width: 50%;
                background: #00000041;
                color: white;
                padding: 0.2px;
                display: flex;
                gap: 20px;
            }

            .image-container {
                flex: 1;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .image-container img {
                max-width: 100%;
                object-fit: cover;
                border-radius: 8px;
                max-height: 400px;
            }


            h1 {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 20px;
                width: 57%;
                margin-top: 112px;
                
            }

            h2 {
                font-size: 2rem;
                font-weight: bold;
                margin-bottom: 10px;
            }

            p {
                margin-bottom: 10px;
            }

            .buy-now{
                display: inline-block;
                padding: 15px 60px;
                margin: 10px 5px;
                font-size: 16px;
                font-weight: bold;
                color: #ffffff;
                text-align: center;
                text-decoration: none;
                border-radius: 30px;
                transition: background-color 0.3s ease;
                background-color: #48bb78;
            }
            .add-to-cart {
                display: inline-block;
                padding: 15px 60px;
                margin: 10px 5px;
                font-size: 16px;
                font-weight: bold;
                color: #ffffff;
                text-align: center;
                text-decoration: none;
                border-radius: 30px;
                transition: background-color 0.3s ease;
                background-color: #4299e1;
            }


            .related-products {
                margin-top: 40px;
                max-width: 1110px;
                width: 100%;
            }

            .related-products h2 {
                font-size: 2rem;
                font-weight: bold;
                text-align: center;
                margin-bottom: 20px;
            }

            .products {
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-start; /* Sắp xếp các sản phẩm từ trái sang phải */
                gap: 20px;
                margin: 0 10px; /* Thêm khoảng cách lề trái và phải */
            }

            .product-card {
                background-color: #ffffff;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                display: flex;
                flex-direction: column;
                width: 250px;
                height: 500px;
                transition: transform 0.5s, box-shadow 0.5s;
                margin-bottom: 20px;
            }
            

            .product-card:hover {
                transform: translateY(-5px) scale(1.01);
                box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
            }

            .products {
                width: calc(100% - 20px); /* Đảm bảo khoảng cách lề trái và phải là 10px */
            }

            .product-card img {
                width: 100%;
                height: 200px; /* Chiều cao cố định cho hình ảnh */
                object-fit: cover;
            }

            .card-body {
                flex: 1; /* Chiếm không gian còn lại */
                padding: 15px;
            }

            .product-card .info {
                text-align: center;
            }

            .btn-primary,
            .btn-danger,
            .btn-success {
                height: 60px;
                width: 100%;
                border-radius: 15px;
                transition: transform 0.3s ease;
                text-align: center;
                padding: 10px;
                margin: 10px 0;
            }

            .btn-primary:hover,
            .btn-danger:hover,
            .btn-success:hover {
                transform: translateY(-3px);
            }
            
            .product-card .info h3 {
                font-size: 18px;
                font-weight: bold;
                color: #2d3748;
                margin: 10px 0;
            }

            .product-card .info p {
                color: #8fe998;
                margin: 10px 0;
            }

            .product-card .info a {
                display: block;
                padding: 10px 20px;
                background-color: #4299e1;
                color: #ffffff;
                border-radius: 8px;
                text-decoration: none;
                font-weight: bold;
                transition: background-color 0.3s ease;
            }

            .product-card .info a:hover {
                background-color: #3182ce;
            }
            .nav-link{
                font-size: 15.5px;
            }
            .tuan_anh{
                margin-top:0px ;
                height: 100px;
                width: 470px;
            }

            .mt-3{
                width: 220px;
            }

            .addToCartBtn{
                width: 100px;
            }

            .header-container {
                max-width: 1902px;
                width: 667%;
                left: 0;
                position: fixed;
                top: 0; /* Giữ header ở vị trí đầu trang */
                z-index: 1000; /* Đảm bảo header có z-index cao để không bị che */
            }

        
            .image-container img {
                border: 2px solid #f7fafc;
            }
            .dark-mode .image-container img {
                border: 2px solid #00000041;
            }

            h1, h2, p {
                color: #2d3748;
            }
            .buy-now,
            .add-to-cart {
                color: #ffffff;
                transition: background-color 0.3s ease;
            }

            .buy-now {
                background-color: #48bb78;
            }

            body.dark-mode .buy-now {
                background-color: #38a169;
            }

            .add-to-cart {
                background-color: #4299e1;
            }

            body.dark-mode .add-to-cart {
                background-color: #3182ce;
            }

            .product-card {
                background-color: #ffffff;
                color: #2d3748;
            }

            body.dark-mode .product-card {
                background-color: #1e1e1e;
                color: #f7fafc;
            }

            .product-card:hover {
                box-shadow: 0px 10px 20px rgba(255, 255, 255, 0.1);
            }

            /* Đổi màu cho header và nav */
            .header-container {
                background-color: #ffffff;
                color: #2d3748;
            }

            body.dark-mode .header-container {
                background-color: #2d3748;
                color: #f7fafc;
            }

            .nav-link {
                color: #1d68ea;
            }

            body.dark-mode .nav-link {
                color: #f7fafc;
            }

            /* Đổi màu cho dropdown */
            .dropdown-menu {
                background-color: #ffffff;
                color:white ;
            }

            body.dark-mode .dropdown-menu {
                background-color: #2d3748;
                color: #f7fafc;
            }

            /* Thay đổi thanh nhỏ dưới liên kết khi hover */
            .nav-link {
                position: relative; /* Để sử dụng absolute positioning cho underline */
                display: inline-block;
                padding-bottom: 5px; /* Khoảng cách giữa text và underline */
            }

            .nav-link::after {
                content: ""; /* Nội dung rỗng để tạo thanh nhỏ */
                position: absolute;
                left: 16%;
                bottom: 0;
                width: 70%;
                height: 2px; /* Độ dày của thanh nhỏ */
                background-color: #0056ea; /* Màu của thanh nhỏ */
                transform: scaleX(0); /* Ẩn thanh nhỏ ban đầu */
                transform-origin: bottom right; /* Vị trí bắt đầu hiệu ứng */
                align-items: center;
                transition: transform 0.3s ease; /* Hiệu ứng chuyển tiếp cho thanh nhỏ */
            }

            .nav-link.home:hover::after,
            .nav-link.bxh:hover::after,
            .nav-link.giohang:hover::after,
            .nav-link.taosanpham:hover::after,
            .nav-link.login:hover::after,
            .nav-link.dangky:hover::after {
                transform: scaleX(1); /* Hiện thanh nhỏ khi hover */
                transform-origin: bottom left; /* Vị trí kết thúc hiệu ứng */
            }

            .card-body.info {
                width: 100%;
                max-width: 700px; /* Chiều rộng tối đa để không bị tràn */
                overflow-wrap: break-word;
                font-size: 20px;
                color: black;
            }
            
            .home-icon {
                width: 30px; /* Thay đổi kích thước của hình ảnh nếu cần */
                height: 30px; /* Thay đổi kích thước của hình ảnh nếu cần */
            }
            .bxh-icon{
            width: 27px; /* Thay đổi kích thước của hình ảnh nếu cần */
            height: 27px;
            }
            .cart-icon{
            width: 23px;
            height: 23px;
            }

            .add-icon{
            width: 30px;
            height: 30px;
            }
            .m1{
                font-size: 50px;
            }
            /* Ẩn menu mặc định */
            .dropdown-menu {
                display: none;
                position: absolute;
                top: 100%; /* Đặt menu xuất hiện ngay dưới avatar */
                left: 0;
                z-index: 1000;
            }

            /* Hiển thị menu khi di chuột vào avatar */
            .nav-link.dropdown-toggle:hover + .dropdown-menu,
            .dropdown-menu:hover {
                display: block;
            }
            .header-design {
                position: fixed; /* Hoặc sử dụng position: sticky; */
                top: 0;
                width: 100%; /* Đảm bảo header chiếm toàn bộ chiều rộng */
                z-index: 1000; /* Đảm bảo header nằm trên các phần tử khác */
            }

            .main-content {
                padding-top: 60px; /* Đảm bảo nội dung không bị che bởi header (thay đổi kích thước này nếu cần) */
            }

            /* Chế độ sáng (mặc định) */
            body {
                background-color: #F5EFFF;
                color: #000;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            /* Chế độ tối */
            body.dark-mode {
                background-color: #1b1b1b;
                color: #f1f1f1;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            .dark-mode .navbar, .dark-mode .card {
                background-color: #000000;
                color: #f1f1f1;
            }

            .dark-mode .btn-primary {
                background-color: #2897f8;
                border-color: #666;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            .dark-mode a{
                color: #ffffff;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            .mode-button{
                height: 30px;
                width: 30px;
            }

            .dark-mode .header-design {
                position: fixed; /* Hoặc sử dụng position: sticky; */
                top: 0;
                width: 100%; /* Đảm bảo header chiếm toàn bộ chiều rộng */
                z-index: 1000; /* Đảm bảo header nằm trên các phần tử khác */
                background-color: #666666fd;
            }

            .text-decoration-none{
                color: black;
            }
            .dark-mode .dropdown-menu{
                background-color: #0c0c0c;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            .dropdown-item{
                color: rgb(0, 0, 0);
                text-decoration: none;
                transition: background-color 0.3s ease, color 0.3s ease;
            }
            .dropdown-menu{
                color: white;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            .dark-mode .product_name{
                color: white;
            }
            #toggle-dark-mode {
                border: none; /* Loại bỏ khung viền */
                outline: none; /* Loại bỏ viền khi nhấn vào nút */
                background: none; /* Loại bỏ màu nền mặc định */
                cursor: pointer; /* Thay đổi con trỏ khi di chuột qua nút */
            }
            .square-box {
                width: 650px;  /* Chiều rộng của ô vuông */
                height: 650px; /* Chiều cao của ô vuông */
                background-color: rgb(255, 255, 255); /* Màu nền của ô vuông */
                border: 2px solid rgb(255, 255, 255); /* Viền của ô vuông */
                margin-top: 20px; /* Khoảng cách giữa ô vuông và nội dung trên */
                margin-left: 300px;
            }

            .dark-mode .square-box {
                width: 650px;  /* Chiều rộng của ô vuông */
                height: 650px; /* Chiều cao của ô vuông */
                background-color: rgb(0, 0, 0); /* Màu nền của ô vuông */
                border: 2px solid rgb(41, 41, 41); /* Viền của ô vuông */
                margin-top: 20px; /* Khoảng cách giữa ô vuông và nội dung trên */
                margin-left: 300px;
            }
            .description {
                word-wrap: break-word; /* Tự động xuống dòng khi hết chiều rộng */
                white-space: normal; /* Cho phép xuống dòng */
            }
            .thong-tin{
                color: black;
            }
            .dark-mode .thong-tin{
                color: white;
            }
            #chat-header {
          height: 65px;
          color: #000;
          font-size: 30px;
          border-radius: 100px;
      }
      .dark-mode #chat-body {
          width: 500px; /* Chiều rộng */
          height: 460px; /* Chiều cao */
          background-color: rgb(50, 50, 50);
          border-radius: 8px;
          box-shadow: 0px 0px 10px rgba(253, 253, 253, 0.2);
          position: fixed;
          top: 48%;
          left: 73%;
          transform: scale(0); /* Đặt thu nhỏ ban đầu */
          transition: transform 0.3s ease, bottom 0.3s ease; /* Hiệu ứng chuyển đổi */
          overflow: hidden;
          z-index: 1001; /* Đảm bảo ô chat nằm trên các phần tử khác */
          display: none; /* Ẩn ô chat ban đầu */
          color: white;
      }
      #chat-body {
          width: 500px; /* Chiều rộng */
          height: 460px; /* Chiều cao */
          background-color: white;
          border-radius: 8px;
          box-shadow: 0px 0px 10px rgba(120, 119, 119, 0.2);
          position: fixed;
          top: 48%;
          left: 73%;
          transform: scale(0); /* Đặt thu nhỏ ban đầu */
          transition: transform 0.3s ease, bottom 0.3s ease; /* Hiệu ứng chuyển đổi */
          overflow: hidden;
          z-index: 1001; /* Đảm bảo ô chat nằm trên các phần tử khác */
          display: none; /* Ẩn ô chat ban đầu */
      }

      #chat-body.active {
          display: block; /* Hiện ô chat */
          transform: scale(1); /* Phóng to */
          bottom: 10px; /* Điều chỉnh vị trí khi phóng to */
      }

      #close-chat{
        font-size: 30px;
      }
      .message {
          background-color: #f1f1f1; /* Màu nền của tin nhắn */
          border-radius: 5px; /* Bo góc */
          padding: 5px; /* Khoảng cách bên trong */
          margin: 5px 0; /* Khoảng cách giữa các ô tin nhắn */
      }
      .search{
        height: 80%;
        width: 50%;
      }
      .button-search {
        background: linear-gradient(to right, #6a11cb, #2575fc); /* Nền gradient màu tím xanh */
        color: #ffffff; /* Màu chữ trắng */
        padding: 12px 24px; /* Khoảng cách bên trong nút */
        border: none; /* Bỏ viền */
        border-radius: 25px; /* Bo tròn góc */
        font-size: 16px; /* Kích thước chữ */
        font-weight: bold; /* Chữ đậm */
        cursor: pointer; /* Con trỏ chuột thành dạng tay khi di chuột vào nút */
        transition: all 0.9s ease; /* Hiệu ứng chuyển đổi mượt mà */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Thêm bóng cho nút */
        width: 25%;
      }

      .button-search:hover {
        background: linear-gradient(to right, #005bf9, #11cb11);
      }

     /* Style for the switch */
      .switch {
        position: relative;
        display: inline-block;
        width: 48px; /* Tăng chiều rộng để có đủ không gian cho nút */
        height: 24px; /* Điều chỉnh chiều cao */
        margin-left: 15px; /* Khoảng cách giữa nhãn và công tắc */
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #d6d6d6; /* Màu nền ban đầu của thanh chuyển */
        transition: 0.4s;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 18px; /* Kích thước của nút */
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /* Đổ bóng cho nút */
      }

      input:checked + .slider {
        background-color: #4CAF50; /* Màu nền khi chế độ tối được bật */
      }

      input:checked + .slider:before {
        transform: translateX(24px); /* Điều chỉnh độ dịch chuyển khi bật */
      }

      .slider.round {
        border-radius: 34px; /* Bo góc cho thanh chuyển */
      }

      .slider.round:before {
        border-radius: 50%; /* Bo góc cho nút */
      }

      .change-mode {
        font-size: 14px; /* Kích thước chữ dễ nhìn hơn */
        font-weight: 500; /* Tăng độ đậm của chữ */
        color: #333; /* Màu chữ cân bằng giữa sáng và tối */
      }
      .dark-mode .change-mode {
        font-size: 14px; /* Kích thước chữ dễ nhìn hơn */
        font-weight: 500; /* Tăng độ đậm của chữ */
        color: #ffffff; /* Màu chữ cân bằng giữa sáng và tối */
      }
      .thong-tin{
        color: #000000;
      }
      .dark-mode .thong-tin{
        color: #ffffff;
      }

            .rating-section, .reviews {
                margin-top: 20px;
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 5px;
                background-color: #f9f9f9;
            }

            .review {
                margin-top: 10px;
                padding: 5px;
                border-bottom: 1px solid #eee;
            }
        </style>
    </head>
    <body>
        <header class="header-design">
            <div class="container-fluid py-3">
              <div class="container d-flex justify-content-between align-items-center" style="margin-left: 415px;">
                <h1 class="h4 mb-0">
                  <a href="/" class="text-decoration-none" style="margin-left: -130px;"><strong>E-Shop</strong></a>
                </h1>
                <!-- Thanh tìm kiếm -->
                <nav class="nav">
                  <ul class="nav">
                    <li class="nav-item">
                      <a class="nav-link home" href="/">
                        <img src="/img/home.png" alt="" class="home-icon"></img>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link bxh" href="/scoreboard">
                        <img src="/img/bxh.jpg" alt="" class="bxh-icon">
                      </a>
                    </li>
                    <% if (!user) { %>
                    <li class="nav-item">
                      <a class="nav-link login" href="/login">Đăng nhập</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link dangky" href="/register">Đăng ký</a>
                    </li>
                    <% } else { %>
                    <li class="nav-item">
                      <a class="nav-link giohang" href="/cart">
                        <img src="/img/cart.jpg" alt="" class="cart-icon">                  
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link taosanpham" href="/product/add">
                        <img src="/img/add.jpg" alt="" class="add-icon">
                      </a>
                    </li>
                    <li class="nav-item dropdown" style="width: 200px;">
                      <a class="nav-link dropdown-toggle d-flex align-items-center" id="userDropdown" role="button">
                        <% if (user.avatar) { %>
                        <img src="/<%= user.avatar %>" class="avatar me-2" alt="" />
                        <% } else { %>
                        <img src="./img/def.jpg" class="avatar me-2" alt="" />
                        <% } %>
                      </a>
                      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li>
                          <a class="dropdown-item" href="/user/<%= user.id %>">Profile</a>
                        </li>
                        <li><a class="dropdown-item" href="/settings">Cài đặt</a></li>
                        <li><a class="dropdown-item">Balanced: <%= user.balance %> VNĐ</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <!-- Chuyển đổi giao diện -->
                        <li class="nav-item">
                          <div class="d-flex align-items-center px-3 py-2">
                            <label class="change-mode" for="toggle-dark-mode" id="mode-label">Chế Độ Sáng</label>
                            <label class="switch" >
                              <input type="checkbox" id="toggle-dark-mode">
                              <span class="slider round"></span>
                            </label>
                          </div>
                        </li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="/logout">Đăng xuất</a></li>
                      </ul>
                    </li>                       
                    <% } %>
                  </ul>
                </nav>
              </div>
            </div>
          </header>
        <m1 style="font-size: 50px;"><strong><center>Product Details</center></strong></m1>
        <div class="container-anh" >
            <div class="image-container" style="margin-left: -175px;">
                <a href="/product/<%= product.id %>">
                    <img 
                        src="<%= product.image ? ('/uploads/' + product.image) : '/img/cart-def.png' %>" 
                        class="card-img-top" 
                        alt="" 
                        onerror="this.onerror=null; this.src='/img/cart-def.png';"
                    />
                </a>
            </div>
            <div class="card-body info">
                <div class="details-container">
                    <h2 class ="product_name"><%= product.name %></h2>
                    <% if (product.sale) { %>
                        <p class="card-text product_name" style="margin-bottom:4px ;">
                            <%= (product.price - (product.price * product.saleval /
                            100))%> VNĐ
                            <del> <%= product.price %> </del>
                            
                            <span class="badge bg-danger ms-2" style="margin-bottom: 10px;" >-<%= product.saleval %>%</span>
                          </p>
                    <% } else { %>
                        <p class="product_name"><strong>Price:</strong> <%= product.price %> VNĐ</p>
                    <% } %>            
                    <p class="thong-tin"><strong>Quantity:</strong> <%= product.quantity %></p>
                    <div class="tuan_anh">
                        <a href="" class="buy-now">Buy Now</a>
                        <a href="" class="add-to-cart">Add to Cart</a>
                        <div style="margin-left: 20px;"><a href="/scoreboard">Bestsellers</a></div>
                    </div>
                </div>
            </div>
        </div>
        <main style="width: 100%; gap: 50px;">
                <div class="row mt-5">
                    <div class="col" style="margin-left: -200px;">
                        <h2 class="section-title text-center product_name" style="margin-left: -120px;">Thông tin sản phẩm:</h2>
                        <div class="square-box description" style="font-size: 20px;">
                            <p class="thong-tin" ><%- product.description %></p>
                        </div>
                                             
                    </div>                    
                    
                    <div class="col">
                        <h2 class="section-title text-center product_name" style="margin-left:-100px">Sản phẩm gợi ý</h2>
                        <div class="row row-cols-1 row-cols-md-5 g-4 " style="margin-left:-000px; gap: 50px;height: auto;width: auto;">
                            <% products.forEach(product=> { %>
                                <div class="col">
                                    <div class="card product-card " >
                                        <a href="/product/<%= product.id %>">
                                            <img 
                                                src="<%= product.image ? ('/uploads/' + product.image) : '/img/cart-def.png' %>" 
                                                class="card-img-top" 
                                                alt="" 
                                                onerror="this.onerror=null; this.src='/img/cart-def.png';"
                                            />
                                        </a>
                                      <div class="card-body ">
                                        <h4 class="card-title"><center><%= product.name %></center></h4>
                                        <% if (product.sale) { %>
                                          <center><span class="badge bg-danger ms-2" style="margin-bottom: 5px;" >-<%= product.saleval %>%</span></center>
                                          <p class="card-text product_name" style="margin-bottom:4px ;">
                                            Giá:<del> <%= product.price %> </del>
                                            <%= (product.price - (product.price * product.saleval /
                                            100)).toFixed(2)%> VNĐ
                                          </p>
                                          <div style="padding-left: 1px; padding-bottom: 10px">
                                            <div class ="creator-day " style ="margin-top: -0px;">
                                                <p class="card-text product_name" style="margin-bottom: 3px">
                                                  Creator: <%= product.creator %>
                                                </p>
                                                <p class="card-text product_name" style="margin-top: 0px">
                                                    Ngày tạo: <%= product.formatted_date %>
                                                </p>
                                            </div>
                                            <div class="d-flex mt-3" style="gap: 10px; margin-top: -100px;">
                                                <a href="/product/<%= product.id %>" class="btn btn-success rounded center-text">
                                                    <div>Thông tin</div>
                                                    <div>sản phẩm</div>
                                                </a>
                                                <a>
                                                    <button type="button" class="btn btn-primary rounded addToCartBtn" data-product-id="<%= product.id %>">
                                                        Thêm vào giỏ
                                                    </button>
                                                </a>
                                            </div>                                            
                                        <% } else { %>
                                          <div style="margin-top: 40px;">
                                              <p class="card-text product_name">Giá: <%= product.price %> VNĐ</p>
                                          </div>
                                          <div style="padding-left: -10px; padding-bottom: 10px">
                                            <div class ="creator-day" style ="margin-top:1px;">
                                                <p class="card-text product_name" style="margin-bottom: -2px">
                                                  Creator: <%= product.creator %>
                                                </p>
                                                <p class="card-text product_name" style="margin-top: 3px">
                                                  Ngày tạo: <%= product.formatted_date %>
                                                </p>
                                            </div>
                                            <div class="d-flex mt-3" style="gap: 10px; margin-top: 30px;">
                                                <a href="/product/<%= product.id %>" class="btn btn-success rounded center-text">
                                                    <div>Thông tin</div>
                                                    <div>sản phẩm</div>
                                                </a>
                                                <a>
                                                    <button type="button" class="btn btn-primary rounded addToCartBtn" data-product-id="<%= product.id %>">
                                                        Thêm vào giỏ
                                                    </button>
                                                </a>
                                            </div>
                                        <% } %>
                                      </div>
                                      </div>
                                    </div>
                                  </div>
                                <% }); %>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div class="rating-section">
            <h3>Đánh giá sản phẩm</h3>
            <form id="ratingForm" method="POST" action="/product/submit-review"> <!-- Thay đổi action phù hợp -->
                <input type="hidden" name="productId" value="<%= product.id %>">
                <div>
                    <label for="rating">Số sao:</label>
                    <select name="rating" required>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div>
                    <label for="comment">Bình luận:</label>
                    <textarea name="comment" rows="4"></textarea>
                </div>
                <button type="submit">Gửi đánh giá</button>
            </form>
        </div>
        
        <div class="reviews">
            <h3>Đánh giá</h3>
            <% if (ratings.length > 0) { %>
                <% ratings.forEach(review => { %>
                    <div class="review">
                        <p><strong><%= review.user_id %></strong> (Ngày: <%= new Date(review.created_at).toDateString() %>)</p>
                        <p>Số sao: <%= review.rating %></p>
                        <p>Bình luận: <%= review.comment || 'Chưa có bình luận' %></p>
                    </div>
                <% }) %>
            <% } else { %>
                <p>Chưa có đánh giá nào cho sản phẩm này.</p>
            <% } %>
        </div>
        
        
    </body>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
      const toggleDarkMode = document.getElementById("toggle-dark-mode");
      const modeLabel = document.getElementById("mode-label");

      // Kiểm tra chế độ hiện tại từ localStorage (nếu có)
      if (localStorage.getItem("darkMode") === "enabled") {
        document.body.classList.add("dark-mode");
        toggleDarkMode.checked = true;
        modeLabel.textContent = "Chế Độ Dark ";
      }

      // Xử lý sự kiện khi chuyển đổi chế độ
      toggleDarkMode.addEventListener("change", function () {
        if (toggleDarkMode.checked) {
          document.body.classList.add("dark-mode");
          modeLabel.textContent = "Chế Độ Dark ";
          localStorage.setItem("darkMode", "enabled"); // Lưu trạng thái
        } else {
          document.body.classList.remove("dark-mode");
          modeLabel.textContent = "Chế Độ Sáng";
          localStorage.setItem("darkMode", "disabled"); // Lưu trạng thái
        }
      });
    });
    </script>

</html>